# Операционный Smoke-Checklist

Этот чек-лист предназначен для быстрой ручной проверки работоспособности платформы RestoAnalytic после каждого успешного развертывания (деплоя) обновления на сервер или VPS.

## 1. Холодный старт приложения
- [ ] Очистить кэш браузера или открыть режим "Инкогнито".
- [ ] Перейти по URL приложения.
- [ ] **Ожидание:** Должна мгновенно загрузиться форма авторизации без съехавших стилей и обрывов. Нативные элементы имеют приятный синий цвет акцента (`#73c3ff`).
- [ ] Ввести тестовые данные.
- [ ] **Ожидание:** Во время первичной сборки кэша (парсинг `parquet`) по центру экрана должен показаться крутящийся лоадер "Загрузка и подготовка данных...". "Белый нерабочий экран" категорически не допускается.

## 2. Навигация
- [ ] Обратить внимание на левую часть экрана (Sidebar).
- [ ] **Ожидание:** Меню навигации должно находиться в боковой панели (иконки + текст), клик по любой вкладке (например "ABC Анализ") должен мгновенно менять содержимое центральной части экрана без перезагрузки всей вкладки браузера.

## 3. Симулятор
- [ ] Нажать на вкладку "Симулятор".
- [ ] Изменить любую цифру в колонке наценок (процентов) или сумм. Нажать Enter или кликнуть вне ячейки.
- [ ] **Ожидание:** Введенные цифры должны моментально пересчитаться в таблице. Карточки сверху (Выручка, Фуд-кост) **не должны мигать или исчезать** ни на микросекунду (проверка отработки `@st.fragment`).

## 4. Закупки
- [ ] Перейти в "Закупки" -> Выбрать фильтр дней.
- [ ] Настроить "Страховку (дни)".
- [ ] **Ожидание:** Аналогично симулятору, изменение параметров "Страховки" перерисовывает только саму таблицу рекомендаций. Остальная часть экрана (графики выше, если есть) остаётся статичной и не моргает.

## 5. ABC-отчёт (Проверка на мобильном)
- [ ] Открыть вкладку "ABC".
- [ ] Сжать окно браузера на ПК до ширины смартфона (около 400px ширины) ИЛИ открыть со смартфона.
- [ ] Скроллить таблицу ABC-классов вниз и вправо.
- [ ] **Ожидание:** Таблица (`st.dataframe`) не должна вылезать за края экрана, растягивая общий дизайн (`use_container_width=True` сработало). Значения валют отформатированы как `[ЦЕЛОЕ] ₽`.

## 6. Авторизация
- [ ] Нажать кнопку "Выйти".
- [ ] Попробовать перейти по прямой внутренней ссылке (например, `/`).
- [ ] **Ожидание:** Система моментально блокирует доступ, перебрасывает на чистый экран авторизации (`auth_flow` работает корректно).

## 7. Сохранность пользователей (SQLite + миграции)
- [ ] Подключиться к серверу по SSH (или открыть терминал локально) и выполнить команду `sqlite3 users.db "SELECT version FROM schema_info;"` (либо открыть в DBeaver).
- [ ] **Ожидание:** Запрос не должен выдать ошибку (таблица существует), значение должно быть `>= 1`. Это доказывает, что миграции прошли корректно и старые пользователи не затерты.

## 8. Консистентность темы
- [ ] Переключиться на любую вкладку, где есть `st.date_input` (Выбор диапазона дат) или ползунок `st.slider`.
- [ ] **Ожидание:** Кнопки и заливка ползунков должны быть светло-синими (`#73c3ff`), а панель календаря - тёмно-синей (`#08101d`). Стандартные цвета Streamlit (яркий циан `#00BFFF` на черном `#111111`) не должны проступать ни на одном этапе.

## 9. Производительность переключения страниц
- [ ] Прокликать сверху вниз все пункты меню в Sidebar (KPI -> Меню -> Категории -> ...).
- [ ] **Ожидание:** Переключение занимает доли секунды. В правом верхнем углу интерфейса Streamlit иконка "Running..." должна появляться и исчезать настолько быстро, что её почти незаметно (подтверждает эффективность `@st.cache_data`).
